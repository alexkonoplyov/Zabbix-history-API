# Zabbix history by API
Zabbix history by API предназачен для проверки наличия истории (history) и динамики изменений (trends) для одного или нескольких узлов через API.
## Структура скрипта
Рядом со скриптом создаётся директория temp с тремя файлами: api-key.txt, api-tmp.txt и api-url.txt.
## Настройка
Запустите скрипт с ключом **-install** и укажите путь для отправки HTTP-запросов. Например, `http://company.com/zabbix/api_jsonrpc.php`. Его можно прописать в файле api-url.txt самостоятельно.
## Другие ключи
### -login
После ключа **-login** нужно указать логин и пароль пользователя для подключения к API. Например, `api.sh -login admin password`. Если у вас уже есть работающий API-ключ, можно записать его в файл api-key.txt самостоятельно.
### -history
После ключа **-history** указываем ID узлов. Например, `api.sh -history 14967 12580`. Скрипт выдаст шесть чисел: пять покажут число записей в истории zabbix, последнее — число записей в динамике изменений. Нули означают, что узел или узлы не имеют записей в базе данных.
### -items
Аналогично действию ключа **-history**, но указываются ID элементов.
### -trends
Как и предыдущий ключ принимает в качестве аргументов ID узлов, но возвращает только число записей в динамике изменений. Пример использования: `api.sh -trends 14967 12580`
### -test
Просмотр текущего API-ключа и пути к API сервера.
### -logout
Отключение сессии с удалением API-ключа.
